<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>UP776060 Dashboard Settings</title>
  <meta name="description" content="The Settings Page of the Web VR Dashboard Prototype">
  <meta name="author" content="UP776060">
  <link rel="stylesheet" type="text/css" href="signupstyle.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>

<body>

    <h1>User Settings</h1>

        <!--'red','blue','green','yellow','pink','white'-->


        <form id="settings" action="">
            <!-- Username: <input type="text" id="Username" value="Enter Username"><br>
            Password: <input type="text" id="Password" value="Enter Password"><br> 
            Enter Password Again: <input type="text" id="Password2" value="Enter Password Again"><br>
            Name: <input type="text" id="Name" value="Enter Name"><br> -->

           Background Colour: <select id="Colour">
                <option value="1">Black</option>
                <option value="2">Red</option>
                <option value="3">Blue</option>
                <option value="4">Green</option>
                <option value="5">Yellow</option>
                <option value="6">Pink</option>
                <option value="7">White</option>
                <option value="8">Orange</option>
           </select>   

           Font Style: <select id="Font">
                <option value="1">Roboto</option>
                <option value="2">Kelsonsans</option>
                <option value="3">Mozillavr</option>
                <option value="4">exo2bold</option>
           </select>

           Font Colour: <select id="fontColour">
                <option value="1">Black</option>
                <option value="2">Red</option>
                <option value="3">Blue</option>
                <option value="4">Green</option>
                <option value="5">Yellow</option>
                <option value="6">Pink</option>
                <option value="7">White</option>
                <option value="8">Orange</option>
           </select>   

            <input type="submit" value="Submit">
        </form>

    <script>
    

        $("#settings").submit(function(event){

            event.preventDefault();

            console.log("stuff happening");

            var username = getCookie('userLoggedIn');
            console.log(username);

            console.log($("#Font").val());
            console.log($("#Colour").val());
            console.log($("#fontColour").val());


                var thisurl = "/changeSettings/"+ username + "&" + $("#Font").val() + "&" + $("#Colour").val()+ "&" + $("#fontColour").val()
                console.log(thisurl);

                $.ajax({

                    //url:"/addUser/"+$("#Username").val()+"&"+$("#Password").val()+"&"+$("#Name").val(),
                    url:thisurl,
                    type:"POST",

                    success: function(result) {
                        console.log(result);

                        if(result == "User already exists. Cannot be added to DB")
                        {
                            alert('User already exists in database! Please try a different username or sign in.');
                        }
                        else {
                            alert('New user: ' + $("#Username").val() + " has been registered!");
                            window.location.replace("/");
                        }
                    }

                })

            }


        )

    </script>

    <script type="text/javascript">

        // Original JavaScript code by Chirp Internet: www.chirp.com.au
        // Please acknowledge use of this code by including this header.
  
        function getCookie(name)
        {
        var re = new RegExp(name + "=([^;]+)");
        var value = re.exec(document.cookie);
        return (value != null) ? unescape(value[1]) : null;
    }
  
  </script>

</body>
</html>